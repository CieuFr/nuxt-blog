var N=Object.defineProperty;var S=(l,t,o)=>t in l?N(l,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):l[t]=o;var v=(l,t,o)=>(S(l,typeof t!="symbol"?t+"":t,o),o);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))i(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const c of n.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function o(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerPolicy&&(n.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?n.credentials="include":e.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(e){if(e.ep)return;e.ep=!0;const n=o(e);fetch(e.href,n)}})();class s{constructor(t,o){this.x=t,this.y=o}static vector_null(){return new s(0,0)}add(t){return new s(this.x+t.x,this.y+t.y)}substr(t){return new s(this.x-t.x,this.y-t.y)}div(t){if(t===0)throw new Error("Cannot divide by 0");return new s(this.x/t,this.y/t)}mult(t){return new s(this.x*t,this.y*t)}mag(){return Math.sqrt(this.x*this.x+this.y*this.y)}dist(t){return this.substr(t).mag()}angle(){return Math.atan2(this.y,this.x)}}const w=class{constructor(t,o,i){this.id=t,this.position=o,this.velocity=i}move(t,o,i){const e=this.cohesion(t,i.cohesion),n=this.separation(t,i.separation),c=this.alignment(t,i.alignment);this.velocity=this.velocity.add(e).add(n).add(c),this.limit_velocity(i.speed),this.position=this.position.add(this.velocity),this.limit_position(o)}cohesion(t,o){let i=s.vector_null();if(o===0)return i;for(const e of t)e.id!==this.id&&(i=i.add(e.position));return i=i.div(t.length-1),i.substr(this.position).mult(o)}separation(t,o){let i=s.vector_null();if(o===0)return i;for(const e of t)e.id!==this.id&&(this.position.dist(e.position)>o||(i=i.add(this.position.substr(e.position))));return i}alignment(t,o){let i=s.vector_null();if(o===0)return i;for(const e of t)e.id!==this.id&&(i=i.add(e.velocity));return i=i.div(t.length-1),i.substr(this.velocity).mult(o)}limit_velocity(t){if(t===0){this.velocity=s.vector_null();return}const o=this.velocity.mag();o<t||(this.velocity=this.velocity.div(o).mult(t))}limit_position(t){let e=this.velocity.x,n=this.velocity.y;this.position.x<100&&(e+=1),this.position.x>t.width-100&&(e-=1),this.position.y<100&&(n+=1),this.position.y>t.height-100&&(n-=1),this.velocity=new s(e,n)}draw(t){t.translate(this.position.x,this.position.y),t.rotate(this.velocity.angle()),t.translate(-this.position.x,-this.position.y),t.fillStyle=w.color,t.beginPath(),t.moveTo(this.position.x,this.position.y),t.lineTo(this.position.x-15,this.position.y+5),t.lineTo(this.position.x-15,this.position.y-5),t.lineTo(this.position.x,this.position.y),t.closePath(),t.fill(),t.translate(this.position.x,this.position.y),t.rotate(-this.velocity.angle()),t.translate(-this.position.x,-this.position.y)}};let p=w;v(p,"color","blue");class O{constructor(t,o){v(this,"flock",[]);for(let i=0;i<t;i++){const e=Math.random()*o.width,n=Math.random()*o.height,c=new s(e,n),_=-10+Math.random()*20,E=-10+Math.random()*20,I=new s(_,E),M=new p(i,c,I);this.flock.push(M)}}move(t,o){for(const i of this.flock)i.move(this.flock,t,o)}draw(t){for(const o of this.flock)o.draw(t)}}const r={cohesion:.015,separation:6,alignment:.66,speed:10},P="black",y=600,f=innerWidth>1300?1300:innerWidth-20,g=document.getElementById("canvas");g.height=y;g.width=f;const m=g.getContext("2d");if(m==null)throw new Error("Cannot get context");const b=new O(100,{width:f,height:y}),L=()=>{m.fillStyle=P,m.fillRect(0,0,f,y),b.draw(m)},x=()=>{L(),b.move({width:f,height:y},r),requestAnimationFrame(x)};x();const a=document.getElementById("cohesion");a.min="0";a.max="0.1";a.step="0.001";a.value=r.cohesion.toString();a.oninput=()=>{r.cohesion=Number(a.value)};const h=document.getElementById("separation");h.min="0";h.max="40";h.step="1";h.value=r.separation.toString();h.oninput=()=>{r.separation=Number(h.value)};const u=document.getElementById("alignment");u.min="0";u.max="1";u.step="0.01";u.value=r.alignment.toString();u.oninput=()=>{r.alignment=Number(u.value)};const d=document.getElementById("speed");d.min="0";d.max="20";d.step="1";d.value=r.speed.toString();d.oninput=()=>{r.speed=Number(d.value)};setInterval(()=>{console.log(r)},1e3);
